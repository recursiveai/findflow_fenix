## Working with Alembic migrations

### Creating Migrations

```bash
# After making change(s) to a DB model
python -m alembic revision --autogenerate -m 'add_column_name_to_table'
```

If a new model was created, the model needs to be imported into `./alembic/env.py`

```python
import recursiveai.findflow.assistant.api.models.organisations
```

Then run the `revision --autogenerate` command

### Run migrations

```bash
# check for revisions, compare the output of
python -m alembic history

# with the output of
python -m alembic current

# to run migrations
python -m alembic upgrade head
```

### Undoing a migration

```bash
# go back 1 migration
python -m alembic downgrade -1

# downgrade to initial migration file
python -m alembic downgrade base
```
